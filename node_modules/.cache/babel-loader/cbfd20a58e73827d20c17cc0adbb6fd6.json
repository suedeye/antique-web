{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Suedeye\\\\task_scopic\\\\my-app\\\\src\\\\Components\\\\ItemDetail.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useMemo } from \"react\";\nimport Button from '@material-ui/core/Button';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport { useParams, Link } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const ItemDetail = () => {\n  _s();\n\n  const {\n    id\n  } = useParams();\n  const [data, setData] = useState([]);\n  const [user, setUser] = useState([]);\n  const [autobidState, setAutobidState] = useState([]);\n  const [bidValue, setBidValue] = useState(0);\n  useEffect(() => {\n    fetch(`/item-detail/${id}`).then(response => response.json()).then(data => setData(data)).then(bid => setBidValue(bid));\n  }, [id]);\n  useEffect(() => {\n    fetch('/user').then(response => {\n      if (response.ok) {\n        return response.json();\n      }\n    }).then(user => setUser(user));\n  }, []);\n  useEffect(() => {\n    fetch(`/get-autobid/${id}`).then(response => response.json()).then(autobidState => setAutobidState(autobidState));\n  }, [id]);\n  useEffect(() => {\n    document.title = `You clicked ${bidValue} times`;\n  });\n\n  const bidItem = () => {\n    if (bidValue >= data.last_bid) {\n      fetch(`/bid/${id}`, {\n        method: 'POST',\n        body: JSON.stringify({\n          id: id,\n          bid: bidValue\n        })\n      }).then(response => response.json());\n      window.location.reload();\n    } else {\n      alert(`The minimum for this bid is ${data.last_bid}`);\n    }\n  };\n\n  const handleAutobidChange = event => {\n    setAutobidState(!autobidState.state);\n    fetch(`/set-autobid`, {\n      method: 'POST',\n      body: JSON.stringify({\n        id: id,\n        state: !autobidState.state\n      })\n    }).then(response => response.json());\n    window.location.reload();\n  };\n\n  const handleBidValue = e => {\n    const re = /^[0-9\\b]+$/;\n\n    if (e.target.value === '' || re.test(e.target.value)) {\n      setBidValue(e.target.value);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [data.length > 0 && data.map(data => /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: [\"Name:\", ' ']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 21\n        }, this), data.name]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: [\"Description:\", ' ']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 21\n        }, this), data.description]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: [\"Initial price:\", ' ']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 21\n        }, this), data.initial_price + '$']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: [\"Actual bid:\", ' ']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 21\n        }, this), data.last_bid_user == null ? '----' : data.last_bid + '$']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: [\"Actual user bid:\", ' ']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 21\n        }, this), data.last_bid_user == null ? '----' : data.last_bid_user]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"name\",\n          value: bid.last_bid,\n          onChange: handleBidValue\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          color: \"primary\",\n          onClick: bidItem,\n          disabled: data.last_bid_user === user.user,\n          children: \"BID\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"Auto-bid\", /*#__PURE__*/_jsxDEV(Checkbox, {\n          checked: autobidState.state ? true : false,\n          onChange: handleAutobidChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 17\n      }, this)]\n    }, 'id', true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }, this)), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Link, {\n      to: \"/home\",\n      children: \"Back\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 9\n  }, this);\n};\n\n_s(ItemDetail, \"STiIQvOY/Fh2wPnAj8QDoVUrer0=\", false, function () {\n  return [useParams];\n});\n\n_c = ItemDetail;\n\nvar _c;\n\n$RefreshReg$(_c, \"ItemDetail\");","map":{"version":3,"sources":["C:/Users/Suedeye/task_scopic/my-app/src/Components/ItemDetail.js"],"names":["React","useState","useEffect","useMemo","Button","Checkbox","useParams","Link","ItemDetail","id","data","setData","user","setUser","autobidState","setAutobidState","bidValue","setBidValue","fetch","then","response","json","bid","ok","document","title","bidItem","last_bid","method","body","JSON","stringify","window","location","reload","alert","handleAutobidChange","event","state","handleBidValue","e","re","target","value","test","length","map","name","description","initial_price","last_bid_user"],"mappings":"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","sourcesContent":["import React, {useState, useEffect, useMemo} from \"react\";\r\nimport Button from '@material-ui/core/Button';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\n\r\nimport {\r\n    useParams,\r\n    Link\r\n  } from \"react-router-dom\";\r\n\r\nexport const ItemDetail = ()=> {\r\n    const { id } = useParams()\r\n    const [data, setData] = useState([])\r\n    const [user, setUser] = useState([])\r\n    const [autobidState, setAutobidState ] = useState([])\r\n    const [bidValue, setBidValue] = useState(0)\r\n\r\n    useEffect(()=> {\r\n        fetch(`/item-detail/${id}`)\r\n        .then(response => response.json())\r\n        .then(data => setData(data))\r\n        .then(bid => setBidValue(bid))      \r\n    }, [id])\r\n\r\n    useEffect(()=> {\r\n        fetch('/user').then(response=> {\r\n            if(response.ok){\r\n                return response.json()\r\n            }\r\n        }).then(user => setUser(user))\r\n    },[])\r\n\r\n    useEffect(()=> {\r\n        fetch(`/get-autobid/${id}`)\r\n        .then(response => response.json())\r\n        .then(autobidState => setAutobidState(autobidState))\r\n    },[id])\r\n\r\n    useEffect(() => {\r\n        document.title = `You clicked ${bidValue} times`;\r\n    });\r\n    \r\n    const bidItem = ()=> {\r\n        if (bidValue >= data.last_bid) {\r\n            fetch(`/bid/${id}`,{\r\n                method: 'POST',\r\n                body: JSON.stringify({\r\n                    id: id,\r\n                    bid: bidValue\r\n                })\r\n            }).then(response => response.json())\r\n            window.location.reload();\r\n        } else {\r\n            alert(`The minimum for this bid is ${data.last_bid}`)\r\n        }\r\n        \r\n    }\r\n\r\n    const handleAutobidChange = (event) => {\r\n        setAutobidState(!autobidState.state)\r\n        fetch(`/set-autobid`,{\r\n            method: 'POST',\r\n            body: JSON.stringify({\r\n                id: id,\r\n                state: !autobidState.state\r\n            })\r\n        }).then(response => response.json())\r\n        window.location.reload();\r\n    }\r\n\r\n    const handleBidValue = (e) => {\r\n        const re = /^[0-9\\b]+$/;\r\n        if (e.target.value === '' || re.test(e.target.value)) {\r\n            setBidValue(e.target.value)\r\n        }\r\n    }\r\n\r\n    return(\r\n        <div>\r\n            {data.length > 0 && data.map(data => \r\n            <div key='id'>                \r\n                <div>                    \r\n                    <strong>\r\n                        Name:{' '}\r\n                    </strong>\r\n                    {data.name}\r\n                </div>  \r\n                <div>                                      \r\n                    <strong>\r\n                        Description:{' '}\r\n                    </strong>\r\n                    {data.description}                     \r\n                </div>\r\n                <div>\r\n                    <strong>\r\n                        Initial price:{' '}\r\n                    </strong>\r\n                    {data.initial_price+'$'}  \r\n                </div>  \r\n                <div>\r\n                    <strong>\r\n                        Actual bid:{' '}\r\n                    </strong>\r\n                    {data.last_bid_user == null ? '----' : data.last_bid+'$'}\r\n                </div>     \r\n                <div>\r\n                    <strong>\r\n                        Actual user bid:{' '}\r\n                    </strong>\r\n                    {data.last_bid_user == null ? '----' : data.last_bid_user}\r\n                </div>\r\n                <div>\r\n                        \r\n                    <input type=\"text\" name=\"name\" value={bid.last_bid} onChange={handleBidValue}/>\r\n                    <Button variant=\"contained\" color=\"primary\" onClick={bidItem} disabled={data.last_bid_user === user.user}>\r\n                    BID\r\n                    </Button>\r\n                </div>\r\n                <div>\r\n                    Auto-bid\r\n                    <Checkbox checked={autobidState.state ? true : false} onChange={handleAutobidChange}/>\r\n                </div>      \r\n            </div>\r\n            )}\r\n            \r\n            <hr></hr>\r\n            <Link to='/home'>Back</Link>\r\n        </div>\r\n    )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}